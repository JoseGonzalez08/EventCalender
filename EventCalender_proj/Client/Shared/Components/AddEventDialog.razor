@using EventCalender_proj.Client.Shared;
@using EventCalender_proj.Client.Shared.Models;
@using EventCalender_proj.Client.Shared.Components;
@inject HttpClient Http;
@using MudBlazor

<MudDialog>
    <DialogContent>
        <AddEventComponent></AddEventComponent>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>
@code {

    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    DateTime? date;
    string description;
    string name;
    public EventClass model { get; set; }

    public async Task InsertEventData()
    {


        // If date is null, use current date time.
        DateTime dateValue = date ?? DateTime.Now;

        // Create a new EventClass instance from the form data
        model = new EventClass
            {
                DateTime = dateValue,
                Description = description,
                Name = name
            };
        // Send a POST request to the API endpoint
        await Http.PostAsJsonAsync("/api/event", model);
    }
    void Submit()
    {
        // Call InsertEventData when the Submit button is clicked
        InsertEventData();
    }
    void Cancel() => MudDialog.Cancel();
}